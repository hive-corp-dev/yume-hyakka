---
---

<nav class="toc-nav -sidebar">
  <p class="toc-nav-sidebar__head">目次</p>
  <div class="toc-sidebar"></div>
</nav>
 
<script>
  import * as tocbot from 'tocbot'
 
  tocbot.init({
    tocSelector: '.toc', // 目次を追加するクラス名
    contentSelector: '#article-body', // 目次を取得するコンテンツ
    listClass: 'toc-list', // olのクラス名
    linkClass: 'toc-link', // aタグのクラス名
    headingSelector: 'h2, h3', // 目次として取得する見出しタグ
    headingsOffset: document.querySelector('.js-header').offsetHeight,
    scrollSmoothOffset: document.querySelector('.js-header').offsetHeight * -1, // スクロール時のオフセット
  })

  tocbot.init({
    tocSelector: '.toc-sidebar', // 目次を追加するクラス名
    contentSelector: '#article-body', // 目次を取得するコンテンツ
    listClass: 'toc-list', // olのクラス名
    linkClass: 'toc-link', // aタグのクラス名
    headingSelector: 'h2, h3', // 目次として取得する見出しタグ
    activeLinkClass: 'is-active-pos', // アクティブリンクのクラス名
    headingsOffset: document.querySelector('.js-header').offsetHeight,
    scrollSmoothOffset: document.querySelector('.js-header').offsetHeight * -1, // スクロール時のオフセット
    hasInnerContainers: true,
  })

</script>

<style is:global lang="scss">

  .toc-nav.-sidebar {
    margin-top: 2.4rem!important;
    padding: 1.6rem;
    max-height: calc(100vh - 200px);
    overflow-y: auto;

    @include mixin.tab-s {
      margin-top: 0!important;
      height: 100%;
      overflow: auto;
    }
  }

  .toc-nav-sidebar__head {
    display: none;

    @include mixin.sp {
      display: block;
      font-size: 1.4rem;
      font-weight: bold;
    font-family: var.$font-base;
    margin-bottom: 1.6rem;
    line-height: 1;
    }
  }

  .toc-sidebar {
    font-family: var.$font-base;

    .toc-list {
      .toc-list-item:first-child {
        .toc-link.node-name--H2 {
          margin-top: 0;
        }
      }
    }

    .toc-link {
      position: relative;

      &::before {
        content: '';
        background-image: linear-gradient(to bottom ,rgba(var.$c-key-1, 1), rgba(var.$c-key-2, 1));
        background-size: 100% 100%;
        background-position: left top;
        background-repeat: no-repeat;
        width: .2rem;
        height: 100%;
        position: absolute;
        left: 0;
        top: 0;
        opacity: 0;
        transition: all .3s;
      }

      &.node-name--H2 {
        display: block;
        margin-top: 1rem;
        font-size: 1.4rem;
        padding-left: 1rem;
        padding-right: 1rem;
      }

      &.node-name--H3 {
        display: block;
        font-size: 1.2rem;
        padding-left: 1.2rem;
        padding-right: 1.2rem;
      }

      &.is-active-pos {
        background-color: #f8f8f8;


        &::before {
          opacity: 1;
        }
      }
    } 
  }
</style>